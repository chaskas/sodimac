#DROP TABLE encuesta_cabecera_respuestas;
CREATE TABLE encuesta_cabecera_respuestas ( Id_Enc_Cab_Resp int NOT NULL AUTO_INCREMENT, Nro_Boleta varchar(100), Fecha_Compra date, Id_Tienda int, Rut int, Dv varchar(1), Nombre_Completo varchar(100), Ciudad varchar(50), Telefono varchar(12), Celular varchar(12), Email varchar(50), Edad int, Sexo varchar(1), Compra_Para varchar(100), PRIMARY KEY (Id_Enc_Cab_Resp) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
#DROP TABLE encuesta_preguntas;
CREATE TABLE encuesta_preguntas ( Id_Enc_Preg int NOT NULL AUTO_INCREMENT, Id_Tipo_Preg int, Valor_Defecto varchar(300), Desc_Pregunta varchar(500), Estado varchar(3) DEFAULT 'ACT', Id_Pais int, PRIMARY KEY (Id_Enc_Preg), INDEX Tipo_Preguntas_fk (Id_Tipo_Preg), INDEX Preg_Pais_fk (Id_Pais) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
#DROP TABLE encuesta_respuestas;
CREATE TABLE encuesta_respuestas ( Id_Enc_Resp int NOT NULL AUTO_INCREMENT, Id_Enc_Preg int, Id_Enc_Cab_Resp int, Valor_Resp varchar(300), PRIMARY KEY (Id_Enc_Resp), INDEX Preg_Resp_fk (Id_Enc_Preg), INDEX Cab_Resp_fk (Id_Enc_Cab_Resp) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
#DROP TABLE endpoint;
CREATE TABLE endpoint ( Id_EndPoint int NOT NULL AUTO_INCREMENT, Desc_EndPoint varchar(40), Host varchar(30), Puerto int, Resto_Url varchar(200), Id_Pais int, PRIMARY KEY (Id_EndPoint), INDEX endpoint_pais_fk (Id_Pais) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
#DROP TABLE oportunidad_cmr;
CREATE TABLE oportunidad_cmr ( Id_Opor_Cmr int NOT NULL AUTO_INCREMENT, Sku varchar(7), Precio_Internet int, Precio_Cmr int, Fecha_Vigencia date, Id_Pais int, PRIMARY KEY (Id_Opor_Cmr), INDEX cmr_pais_fk (Id_Pais) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
#DROP TABLE pais;
CREATE TABLE pais ( Id_Pais int DEFAULT '0' NOT NULL, Desc_Pais varchar(20), Sigla varchar(4), PRIMARY KEY (Id_Pais) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
insert into pais (Id_Pais, Desc_Pais, Sigla) values (51, 'Perú', 'PE');
insert into pais (Id_Pais, Desc_Pais, Sigla) values (54, 'Argentina', 'AR');
insert into pais (Id_Pais, Desc_Pais, Sigla) values (56, 'Chile', 'CL');
insert into pais (Id_Pais, Desc_Pais, Sigla) values (57, 'Colombia', 'CO');
#DROP TABLE region;
CREATE TABLE region ( Id_Region int DEFAULT '0' NOT NULL, Desc_Region varchar(60), Id_Pais int, PRIMARY KEY (Id_Region), INDEX region_pais_fk (Id_Pais) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
insert into region (Id_Region, Desc_Region, Id_Pais) values (1, 'Tarapacá', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (2, 'Antofagasta', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (3, 'Atacama', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (4, 'Coquimbo', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (5, 'Valparaíso', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (6, 'O''Higgins', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (7, 'Maule', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (8, 'Biobío', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (9, 'La Araucanía', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (10, 'Los Lagos', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (11, 'Aysén', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (12, 'Magallanes', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (13, 'Metropolitana de Santiago', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (14, 'Los Ríos', 56);
insert into region (Id_Region, Desc_Region, Id_Pais) values (15, 'Arica y Parinacota', 56);
#DROP TABLE servicios_por_tienda;
CREATE TABLE servicios_por_tienda ( Id_Tienda int DEFAULT '0' NOT NULL, Id_Servicio_Tienda int DEFAULT '0' NOT NULL, PRIMARY KEY (Id_Servicio_Tienda, Id_Tienda), INDEX Tienda_fk (Id_Tienda) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
#DROP TABLE servicios_tienda;
CREATE TABLE servicios_tienda ( Id_Servicio_Tienda int NOT NULL AUTO_INCREMENT, Desc_Servicio varchar(100), Estado varchar(3), PRIMARY KEY (Id_Servicio_Tienda) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (1, 'Arriendo de herramientas y maquinaria', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (2, 'Aseo domiciliario', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (3, 'Bodegaje', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (4, 'Cafetería', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (5, 'Cajeros', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (6, 'Centro de proyectos', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (7, 'Cerrajería', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (8, 'Garantía extendida', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (9, 'KINO (juego de azar)', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (10, 'Lavado de pisos duros', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (11, 'Mant. de calefactor a leña', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (12, 'Mant. de calefón', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (13, 'Mant. de jardín', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (14, 'Mant. de piscina', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (15, 'Mudanza', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (16, 'Pulido de pisos de madera', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (17, 'Reparaciones hogar', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (18, 'Seguros Falabella', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (19, 'Servicios especiales', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (20, 'Servicios tarjeta CMR', 'ACT');
insert into servicios_tienda (Id_Servicio_Tienda, Desc_Servicio, Estado) values (21, 'Tabaquería', 'ACT');
#DROP TABLE tienda;
CREATE TABLE tienda ( Id_Tienda int DEFAULT '0' NOT NULL, Nombre varchar(70), Direccion varchar(100), Latitud varchar(25), Longitud varchar(25), Telefono varchar(20), Horario varchar(100), Id_Region int, Id_Tipo_Tienda int, Id_Pais int, Gerente varchar(60), Busc_Producto int, PRIMARY KEY (Id_Tienda), INDEX Tienda_region_fk (Id_Region), INDEX Tienda_Pais_fk (Id_Pais), INDEX Tienda_Tipo_fk (Id_Tipo_Tienda) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
#DROP TABLE tipo_pregunta;
CREATE TABLE tipo_pregunta ( Id_Tipo_Preg int NOT NULL AUTO_INCREMENT, Desc_Tipo_Preg varchar(30), PRIMARY KEY (Id_Tipo_Preg) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
insert into tipo_pregunta (Id_Tipo_Preg, Desc_Tipo_Preg) values (1, 'Combo');
insert into tipo_pregunta (Id_Tipo_Preg, Desc_Tipo_Preg) values (2, 'Completado');
#DROP TABLE tipo_tienda;
CREATE TABLE tipo_tienda ( Id_Tipo_Tienda int NOT NULL, Desc_Tipo_Tienda varchar(30), PRIMARY KEY (Id_Tipo_Tienda) ) ENGINE=InnoDB DEFAULT CHARSET=latin1;
insert into tipo_tienda (Id_Tipo_Tienda, Desc_Tipo_Tienda) values (1, 'HomeCenter');
insert into tipo_tienda (Id_Tipo_Tienda, Desc_Tipo_Tienda) values (2, 'Constructor');
#ALTER TABLE encuesta_preguntas ADD CONSTRAINT Preg_Pais_fk FOREIGN KEY (Id_Pais) REFERENCES pais (Id_Pais) ;
#ALTER TABLE encuesta_preguntas ADD CONSTRAINT Tipo_Preguntas_fk FOREIGN KEY (Id_Tipo_Preg) REFERENCES tipo_pregunta (Id_Tipo_Preg);
#ALTER TABLE encuesta_respuestas ADD CONSTRAINT Cab_Resp_fk FOREIGN KEY (Id_Enc_Cab_Resp) REFERENCES encuesta_cabecera_respuestas (Id_Enc_Cab_Resp) ;
#ALTER TABLE encuesta_respuestas ADD CONSTRAINT Preg_Resp_fk FOREIGN KEY (Id_Enc_Preg) REFERENCES encuesta_preguntas (Id_Enc_Preg);
#ALTER TABLE endpoint ADD CONSTRAINT endpoint_pais_fk FOREIGN KEY (Id_Pais) REFERENCES pais (Id_Pais);
#ALTER TABLE oportunidad_cmr ADD CONSTRAINT cmr_pais_fk FOREIGN KEY (Id_Pais) REFERENCES pais (Id_Pais);
#ALTER TABLE region ADD CONSTRAINT region_pais_fk FOREIGN KEY (Id_Pais) REFERENCES pais (Id_Pais);
#ALTER TABLE servicios_por_tienda ADD CONSTRAINT Servicios_fk FOREIGN KEY (Id_Servicio_Tienda) REFERENCES servicios_tienda (Id_Servicio_Tienda) ;
#ALTER TABLE servicios_por_tienda ADD CONSTRAINT Tienda_fk FOREIGN KEY (Id_Tienda) REFERENCES tienda (Id_Tienda);
#ALTER TABLE tienda ADD CONSTRAINT Tienda_Pais_fk FOREIGN KEY (Id_Pais) REFERENCES pais (Id_Pais) ;
#ALTER TABLE tienda ADD CONSTRAINT Tienda_region_fk FOREIGN KEY (Id_Region) REFERENCES region (Id_Region) ;
#ALTER TABLE tienda ADD CONSTRAINT Tienda_Tipo_fk FOREIGN KEY (Id_Tipo_Tienda) REFERENCES tipo_tienda (Id_Tipo_Tienda);
